
@{
    ViewBag.Title = "Index";
}

@section head_plugin {
    <link rel="stylesheet" href="~/Content/assets/css/jquery-ui.min.css" />
    <link rel="stylesheet" href="~/Content/assets/css/bootstrap-datepicker3.min.css" />
    <link rel="stylesheet" href="~/Content/assets/css/ui.jqgrid.min.css" />
    <link rel="stylesheet" href="~/Content/assets/css/jquery-ui.custom.min.css" />
    <link rel="stylesheet" href="~/Content/assets/css/chosen.min.css" />
    <link rel="stylesheet" href="~/Content/assets/css/bootstrap-datepicker3.min.css" />
    <link rel="stylesheet" href="~/Content/assets/css/bootstrap-timepicker.min.css" />
    <link rel="stylesheet" href="~/Content/assets/css/daterangepicker.min.css" />
    <link rel="stylesheet" href="~/Content/assets/css/bootstrap-datetimepicker.min.css" />
    <link rel="stylesheet" href="~/Content/assets/css/bootstrap-colorpicker.min.css" />
}

<!-- page content begin -->
<div class="page-header">
    <h1>客戶資料管理</h1>
</div>
<div>
    <label for="form-field-8">客戶編號</label>
    <input type="text" class="input-small">

    <label for="form-field-8">名稱</label>
    <input type="text" class="input-large">

    <label for="form-field-8">簡稱</label>
    <input type="text" class="input-small">

    <label for="form-field-8">群組碼</label>
    <input type="text" class="input-small">

    <label for="form-field-8">是否使用</label>
    <label>
        <input name="switch-field-1" class="ace ace-switch ace-switch-7" type="checkbox">
        <span class="lbl"></span>
    </label>

    <label for="form-field-8">交易性質</label>
    <select name="number" id="number">
        <option selected="selected">交易</option>
        <option>潛在</option>
    </select>

    <hr />
</div>

<div class="row">

    <!--<div class="form-control ">-->
    <ul class="nav nav-tabs" id="myTab">
        <li class="active">
            <a data-toggle="tab" href="#home">
                <i class="green ace-icon fa fa-home bigger-120"></i>
                主檔
            </a>
        </li>

        <li>
            <a data-toggle="tab" href="#messages">
                財務資料
            </a>
        </li>

        <li>
            <a data-toggle="tab" href="#other">
                其他

            </a>
        </li>

        <li>
            <a data-toggle="tab" href="#member">
                會員設定

            </a>
        </li>

        <li class="dropdown">
            <a data-toggle="dropdown" class="dropdown-toggle" href="#">
                <i class="green ace-icon fa fa-cog bigger-120"></i>
                資訊 &nbsp;
                <i class="ace-icon fa fa-caret-down bigger-110 width-auto"></i>
            </a>

            <ul class="dropdown-menu dropdown-info">
                <li>
                    <a data-toggle="tab" href="#dropdown1">檢視歷史紀錄</a>
                </li>

                <li>
                    <a data-toggle="tab" href="#dropdown2">交易歷史紀錄</a>
                </li>
            </ul>
        </li>
    </ul>

    <div class="tab-content">
        <div id="home" class="tab-pane fade in active">

            <div class="form-group">
                <span>
                    <label for="form-field-8"> 電話一</label>
                    <input type="text" class="input-large">
                </span>

                <span>
                    <label for="form-field-8">電話 二</label>
                    <input type="text" class="input-large ">
                </span>

                <span>
                    <label for="form-field-8">傳真</label>
                    <input type="text" class="input-large ">
                </span>

            </div>


            <div class="form-group">
                <label for="form-field-9">統一編號</label>
                <input type="text" class="input-medium">



                <label for="form-field-select-3">郵遞區號</label>

                <select class="chosen-select form-field-9" id="form-field-select-3" data-placeholder="Choose a State...">
                    <option value="">  </option>
                    <option value="AL">Alabama</option>
                    <option value="AK">Alaska</option>
                    <option value="AZ">Arizona</option>
                    <option value="AR">Arkansas</option>
                    <option value="CA">California</option>
                    <option value="CO">Colorado</option>
                    <option value="CT">Connecticut</option>
                    <option value="DE">Delaware</option>
                    <option value="FL">Florida</option>
                    <option value="GA">Georgia</option>
                    <option value="HI">Hawaii</option>
                    <option value="ID">Idaho</option>
                    <option value="IL">Illinois</option>
                    <option value="IN">Indiana</option>
                    <option value="IA">Iowa</option>
                    <option value="KS">Kansas</option>
                    <option value="KY">Kentucky</option>
                    <option value="LA">Louisiana</option>
                    <option value="ME">Maine</option>
                    <option value="MD">Maryland</option>
                    <option value="MA">Massachusetts</option>
                    <option value="MI">Michigan</option>
                    <option value="MN">Minnesota</option>
                    <option value="MS">Mississippi</option>
                    <option value="MO">Missouri</option>
                    <option value="MT">Montana</option>
                    <option value="NE">Nebraska</option>
                    <option value="NV">Nevada</option>
                    <option value="NH">New Hampshire</option>
                    <option value="NJ">New Jersey</option>
                    <option value="NM">New Mexico</option>
                    <option value="NY">New York</option>
                    <option value="NC">North Carolina</option>
                    <option value="ND">North Dakota</option>
                    <option value="OH">Ohio</option>
                    <option value="OK">Oklahoma</option>
                    <option value="OR">Oregon</option>
                    <option value="PA">Pennsylvania</option>
                    <option value="RI">Rhode Island</option>
                    <option value="SC">South Carolina</option>
                    <option value="SD">South Dakota</option>
                    <option value="TN">Tennessee</option>
                    <option value="TX">Texas</option>
                    <option value="UT">Utah</option>
                    <option value="VT">Vermont</option>
                    <option value="VA">Virginia</option>
                    <option value="WA">Washington</option>
                    <option value="WV">West Virginia</option>
                    <option value="WI">Wisconsin</option>
                    <option value="WY">Wyoming</option>
                </select>




                <label for="form-field-9">通訊地址</label>
                <input type="text" class="input-large ">
            </div>

            <div class="form-group">
                <label for="form-field-9">發票名稱</label>
                <input type="text" class="input-large ">

                <label for="form-field-9">發票地址</label>
                <input type="text" class="input-large ">
            </div>

            <div class="form-group">
                <label for="form-field-9">電子郵件</label>
                <input type="text" class="input-large ">

                <label for="form-field-9">網址</label>
                <input type="text" class="input-large ">
            </div>

            <div class="form-group">
                <label for="form-field-9">區域別</label>
                <select name="number" id="number">
                    <option selected="selected">新莊地區</option>
                    <option>板橋地區</option>
                    <option>土城地區</option>
                    <option>三重地區</option>
                </select>


                <label for="form-field-9">使用公司</label>
                <input type="text" class="input-small">

                <label for="form-field-9">負責人</label>
                <input type="text" class="input-medium">
            </div>

            <div class="form-group">

                <label for="form-field-9">業務員</label>

                <a href="#modal-table" role="button" class="green" data-toggle="modal">
                    <i class="ace-icon glyphicon glyphicon-search"></i>
                </a>

                <input type="text" class="input-small">
                <input readonly="" type="text" class="input-medium">

                <label for="form-field-9">售價等級(A-Z)</label>
                <input type="text" class="input-small">
            </div>

            <div class="form-group">

                <div>
                    <label for="form-field-11">備註</label>

                    <textarea id="form-field-11" class="autosize-transition form-control"></textarea>
                </div>

            </div>

        </div>

        <div id="messages" class="tab-pane fade">

            <div class="form-group">
                <span>
                    <label for="form-field-8"> 交易幣別</label>
                    <input type="text" class="input-small">
                    <input readonly="" type="text" class="input-medium">
                </span>

                <span>
                    <label for="form-field-8">發票聯式</label>
                    <select name="number" id="number">
                        <option selected="selected">手二聯</option>
                        <option>停用</option>
                    </select>
                </span>

            </div>


            <div class="form-group">
                <label for="form-field-9">信用額度</label>
                <input type="text" class="input-medium">

                <label for="form-field-9">付款條件</label>
                <input type="text" class="input-large ">

                <label for="form-field-9">應收帳款</label>
                <input type="text" class="input-small  ">
                <input readonly="" type="text" class="input-medium">
            </div>


            <div class="form-group">
                <label for="form-field-9">收款模式</label>
                <select name="number" id="number">
                    <option selected="selected">現金</option>
                    <option>停用</option>
                </select>

                <label for="form-field-9">月結標記</label>
                <select name="number" id="number">
                    <option selected="selected">是</option>
                    <option>停用</option>
                </select>

                <label for="form-field-9">現金折讓最大天數</label>
                <input type="text" class="input-small  ">

                <label for="form-field-9">應收票據</label>
                <input type="text" class="input-small  ">
                <input readonly="" type="text" class="input-medium  ">
            </div>


            <div class="form-group">

                <label for="form-field-9">月結日</label>

                <label for="form-field-9">銷貨</label>
                <select name="number" id="number">
                    <option selected="selected">當月</option>
                    <option>停用</option>
                </select>
                <input type="text" class="input-small  ">

                <label for="form-field-9">帳款歸屬</label>
                <input type="text" class="input-small  ">

                <label for="form-field-9">預收貨款</label>
                <input type="text" class="input-small  ">
                <input readonly="" type="text" class="input-medium  ">
            </div>

            <div class="form-group">

                <label for="form-field-9">對帳日</label>

                <label for="form-field-9">月結</label>
                <select name="number" id="number">
                    <option selected="selected">當月</option>
                    <option>停用</option>
                </select>
                <input type="text" class="input-small  ">


                <label for="form-field-9">銀行存款</label>
                <input type="text" class="input-small  ">
                <input readonly="" type="text" class="input-medium  ">
            </div>


            <div class="form-group">
                <label for="form-field-9">收票日</label>

                <label for="form-field-9">月結</label>
                <select name="number" id="number">
                    <option selected="selected">當月</option>
                    <option>停用</option>
                </select>
                <input type="text" class="input-small">


                <label for="form-field-9">應付傭金</label>
                <input type="text" class="input-small  ">
                <input readonly="" type="text" class="input-medium  ">

            </div>



            <div class="form-group">

                <label for="form-field-9">兌現日</label>

                <label for="form-field-9">月結</label>
                <select name="number" id="number">
                    <option selected="selected">當月</option>
                    <option>停用</option>
                </select>
                <input type="text" class="input-small">


                <label for="form-field-9">傭金支出</label>
                <input type="text" class="input-small  ">
                <input readonly="" type="text" class="input-medium  ">

            </div>

        </div>

        <div id="other" class="tab-pane fade">
            <p>123</p>
        </div>

        <div id="member" class="tab-pane fade">
            <p>456</p>
        </div>

        <div id="dropdown1" class="tab-pane fade">
            <p>我不是檢視歷史紀錄</p>
        </div>

        <div id="dropdown2" class="tab-pane fade">
            <p>我也不是檢視歷史紀錄</p>
        </div>
    </div>
    &nbsp;
    <div class="row">
        <div class="col-md-offset-4 col-md-9">
            <a class="btn btn-white btn-info btn-bold ">
                <i class="ace-icon fa fa-floppy-o bigger-120 blue"></i>
                儲存
            </a>

            &nbsp;

            <a class="btn btn-white btn-pink btn-round" href="#">
                <i class="ace-icon fa fa-undo "></i>
                返回
            </a>

        </div>
    </div>

</div><!-- ./col -->
<!--</div>--><!-- ./row -->

<!-- use jquery:  $('#tabs_2').tabs()-->
<div class="tabs">
    <ul>
        <li>
            <a href="#tabs-1">聯絡人</a>
        </li>

        <li>
            <a href="#tabs-2">送貨地址</a>
        </li>

        <li>
            <a href="#tabs-3">銷售目標</a>
        </li>
    </ul>

    <div id="tabs-1">
        <div class="col-sm-13">
            <table id="grid-table1"></table>
            <div id="grid-pager1"></div>

        </div>
    </div>

    <div id="tabs-2">
        <div class="col-sm-13">
            <h2>DataTable2</h2>
        </div>
    </div>

    <div id="tabs-3">
        <div class="col-sm-13">
            <h2>DataTable3</h2>
        </div>
    </div>

    <!-- PAGE CONTENT ENDS -->
</div><!-- /.col -->
                      
<div class="footer">
    <div class="footer-inner">

    </div>
</div>

<a href="#" id="btn-scroll-up" class="btn-scroll-up btn btn-sm btn-inverse">
    <i class="ace-icon fa fa-angle-double-up icon-only bigger-110"></i>
</a>
  
<!-- modal-table begin -->
<div id="modal-table" class="modal fade" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header no-padding">
                <div class="table-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                        <span class="white">&times;</span>
                    </button>
                    客戶資料巡覽輔助視窗
                </div>
            </div>

            <div class="modal-body no-padding">
                <table class="table table-striped table-bordered table-hover no-margin-bottom no-border-top">
                    <thead>
                        <tr>
                            <th>客戶編號</th>
                            <th>簡稱</th>
                            <th>統一編號</th>
                            <th>電話一</th>
                            <th>傳真</th>

                        </tr>
                    </thead>

                    <tbody>
                        <tr>
                            <td>
                                <a href="#">A0001</a>
                            </td>
                            <td>瀚博資訊</td>
                            <td>84298194</td>
                            <td>23812886</td>
                            <td></td>
                        </tr>

                        <tr>
                            <td>
                                <a href="#">A0002</a>
                            </td>
                            <td>遠揚企業</td>
                            <td>97291617</td>
                            <td>27834988</td>
                            <td>26530419</td>
                        </tr>

                        <tr>
                            <td>
                                <a href="#">A0003</a>
                            </td>
                            <td>曜興電子</td>
                            <td>84756424</td>
                            <td>2999-1366</td>
                            <td>2999-1365</td>
                        </tr>

                        <tr>
                            <td>
                                <a href="#">A0004</a>
                            </td>
                            <td>決策資訊</td>
                            <td>22637639</td>
                            <td>25957742</td>
                            <td>25964736</td>
                        </tr>

                        <tr>
                            <td>
                                <a href="#">A0005</a>
                            </td>
                            <td>良升資訊</td>
                            <td>97446366</td>
                            <td>21002198</td>
                            <td>21002199</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="modal-footer no-margin-top">
                <button class="btn btn-sm btn-danger pull-left" data-dismiss="modal">
                    <i class="ace-icon fa fa-times"></i>
                    Close
                </button>

                <ul class="pagination pull-right no-margin">
                    <li class="prev disabled">
                        <a href="#">
                            <i class="ace-icon fa fa-angle-double-left"></i>
                        </a>
                    </li>

                    <li class="active">
                        <a href="#">1</a>
                    </li>

                    <li>
                        <a href="#">2</a>
                    </li>

                    <li>
                        <a href="#">3</a>
                    </li>

                    <li class="next">
                        <a href="#">
                            <i class="ace-icon fa fa-angle-double-right"></i>
                        </a>
                    </li>
                </ul>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div>
<!-- modal table end -->

<!-- Page content end -->

@section footer_plugin {
    <!-- page specific plugin scripts -->
    <script src="~/Scripts/assets/js/bootstrap-datepicker.min.js"></script>
    <script src="~/Scripts/assets/js/jquery.jqGrid.min.js"></script>
    <script src="~/Scripts/assets/js/grid.locale-en.js"></script>
    <!-- page specific plugin scripts -->
    <script src="~/Scripts/assets/js/jquery-ui.min.js"></script>
    <script src="~/Scripts/assets/js/jquery.ui.touch-punch.min.js"></script>

    <!-- ace scripts -->
    <script src="~/Scripts/assets/js/ace-elements.min.js"></script>
    <script src="~/Scripts/assets/js/ace.min.js"></script>

    <script src="~/Scripts/assets/js/jquery-ui.custom.min.js"></script>
    <script src="~/Scripts/assets/js/jquery.ui.touch-punch.min.js"></script>
    <script src="~/Scripts/assets/js/bootbox.js"></script>
    <script src="~/Scripts/assets/js/jquery.easypiechart.min.js"></script>
    <script src="~/Scripts/assets/js/jquery.gritter.min.js"></script>
    <script src="~/Scripts/assets/js/spin.js"></script>

    <script src="~/Scripts/assets/js/chosen.jquery.min.js"></script>
    <script src="~/Scripts/assets/js/spinbox.min.js"></script>
    <script src="~/Scripts/assets/js/bootstrap-timepicker.min.js"></script>
    <script src="~/Scripts/assets/js/moment.min.js"></script>
    <script src="~/Scripts/assets/js/daterangepicker.min.js"></script>
    <script src="~/Scripts/assets/js/bootstrap-datetimepicker.min.js"></script>
    <script src="~/Scripts/assets/js/bootstrap-colorpicker.min.js"></script>
    <script src="~/Scripts/assets/js/jquery.knob.min.js"></script>
    <script src="~/Scripts/assets/js/autosize.min.js"></script>
    <script src="~/Scripts/assets/js/jquery.inputlimiter.min.js"></script>
    <script src="~/Scripts/assets/js/jquery.maskedinput.min.js"></script>
    <script src="~/Scripts/assets/js/bootstrap-tag.min.js"></script>    
}

@section footer_script {
    <script type="text/javascript">
        $(".tabs").tabs();
            var grid_data =
			[
				{ id: "1", sdate: "管理員", name: "林一林", stock: "tim@startnet.com.tw", ship: "89653030", note: "11" },
                { id: "2", sdate: "主管", name: "邱俊逸", stock: "sony@startnet.com.tw", ship: "89653030", note: "15" },

			];

            var subgrid_data =
			[
			 { id: "1", name: "sub grid item 1", qty: 11 },
			 { id: "2", name: "sub grid item 2", qty: 3 },
			 { id: "3", name: "sub grid item 3", qty: 12 },
			 { id: "4", name: "sub grid item 4", qty: 5 },
			 { id: "5", name: "sub grid item 5", qty: 2 },
			 { id: "6", name: "sub grid item 6", qty: 9 },
			 { id: "7", name: "sub grid item 7", qty: 3 },
			 { id: "8", name: "sub grid item 8", qty: 8 }
			];

            jQuery(function ($) {
                var grid_selector = "#grid-table1";
                var pager_selector = "#grid-pager1";


                var parent_column = $(grid_selector).closest('[class*="col-"]');
                //resize to fit page size
                $(window).on('resize.jqGrid', function () {
                    $(grid_selector).jqGrid('setGridWidth', parent_column.width());
                })

                //resize on sidebar collapse/expand
                $(document).on('settings.ace.jqGrid', function (ev, event_name, collapsed) {
                    if (event_name === 'sidebar_collapsed' || event_name === 'main_container_fixed') {
                        //setTimeout is for webkit only to give time for DOM changes and then redraw!!!
                        setTimeout(function () {
                            $(grid_selector).jqGrid('setGridWidth', parent_column.width());
                        }, 20);
                    }
                })

                //if your grid is inside another element, for example a tab pane, you should use its parent's width:
                /**
				$(window).on('resize.jqGrid', function () {
					var parent_width = $(grid_selector).closest('.tab-pane').width();
					$(grid_selector).jqGrid( 'setGridWidth', parent_width );
				})
				//and also set width when tab pane becomes visible
				$('#myTab a[data-toggle="tab"]').on('shown.bs.tab', function (e) {
				  if($(e.target).attr('href') == '#mygrid') {
					var parent_width = $(grid_selector).closest('.tab-pane').width();
					$(grid_selector).jqGrid( 'setGridWidth', parent_width );
				  }
				})
				*/





                jQuery(grid_selector).jqGrid({
                    //direction: "rtl",

                    //subgrid options
                    subGrid: true,
                    //subGridModel: [{ name : ['No','Item Name','Qty'], width : [55,200,80] }],
                    //datatype: "xml",
                    subGridOptions: {
                        plusicon: "ace-icon fa fa-plus center bigger-110 blue",
                        minusicon: "ace-icon fa fa-minus center bigger-110 blue",
                        openicon: "ace-icon fa fa-chevron-right center orange"
                    },
                    //for this example we are using local data
                    subGridRowExpanded: function (subgridDivId, rowId) {
                        var subgridTableId = subgridDivId + "_t";
                        $("#" + subgridDivId).html("<table id='" + subgridTableId + "'></table>");
                        $("#" + subgridTableId).jqGrid({
                            datatype: 'local',
                            data: subgrid_data,
                            colNames: ['No', 'Item Name', 'Qty'],
                            colModel: [
								{ name: 'id', width: 50 },
								{ name: 'name', width: 150 },
								{ name: 'qty', width: 50 }
                            ]
                        });
                    },



                    data: grid_data,
                    datatype: "local",
                    height: 250,
                    colNames: [' ', '序號', '職稱', '姓名', '電子郵件', '連絡電話', '分機'],
                    colModel: [
						{
						    name: 'myac', index: '', width: 80, fixed: true, sortable: false, resize: false,
						    formatter: 'actions',
						    formatoptions: {
						        keys: true,
						        //delbutton: false,//disable delete button

						        delOptions: { recreateForm: true, beforeShowForm: beforeDeleteCallback },
						        //editformbutton:true, editOptions:{recreateForm: true, beforeShowForm:beforeEditCallback}
						    }
						},
						{ name: 'id', index: 'id', width: 60, sorttype: "int", editable: true },
						{ name: 'sdate', index: 'sdate', width: 90, editable: true, sorttype: "date", unformat: pickDate },
						{ name: 'name', index: 'name', width: 150, editable: true, editoptions: { size: "20", maxlength: "30" } },
						{ name: 'stock', index: 'stock', width: 70, editable: true, edittype: "checkbox", editoptions: { value: "Yes:No" }, unformat: aceSwitch },
						{ name: 'ship', index: 'ship', width: 90, editable: true, edittype: "select", editoptions: { value: "FE:FedEx;IN:InTime;TN:TNT;AR:ARAMEX" } },
						{ name: 'note', index: 'note', width: 150, sortable: false, editable: true, edittype: "textarea", editoptions: { rows: "2", cols: "10" } }
                    ],

                    viewrecords: true,
                    rowNum: 10,
                    rowList: [10, 20, 30],
                    pager: pager_selector,
                    altRows: true,
                    //toppager: true,

                    multiselect: true,
                    //multikey: "ctrlKey",
                    multiboxonly: true,

                    loadComplete: function () {
                        var table = this;
                        setTimeout(function () {
                            styleCheckbox(table);

                            updateActionIcons(table);
                            updatePagerIcons(table);
                            enableTooltips(table);
                        }, 0);
                    },

                    editurl: "./dummy.php",//nothing is saved
                    caption: "聯絡人資訊"

                    //,autowidth: true,


                    /**
					,
					grouping:true,
					groupingView : {
						 groupField : ['name'],
						 groupDataSorted : true,
						 plusicon : 'fa fa-chevron-down bigger-110',
						 minusicon : 'fa fa-chevron-up bigger-110'
					},
					caption: "Grouping"
					*/

                });
                $(window).triggerHandler('resize.jqGrid');//trigger window resize to make the grid get the correct size



                //enable search/filter toolbar
                //jQuery(grid_selector).jqGrid('filterToolbar',{defaultSearch:true,stringResult:true})
                //jQuery(grid_selector).filterToolbar({});


                //switch element when editing inline
                function aceSwitch(cellvalue, options, cell) {
                    setTimeout(function () {
                        $(cell).find('input[type=checkbox]')
							.addClass('ace ace-switch ace-switch-5')
							.after('<span class="lbl"></span>');
                    }, 0);
                }
                //enable datepicker
                function pickDate(cellvalue, options, cell) {
                    setTimeout(function () {
                        $(cell).find('input[type=text]')
							.datepicker({ format: 'yyyy-mm-dd', autoclose: true });
                    }, 0);
                }


                //navButtons
                jQuery(grid_selector).jqGrid('navGrid', pager_selector,
					{ 	//navbar options
					    edit: true,
					    editicon: 'ace-icon fa fa-pencil blue',
					    add: true,
					    addicon: 'ace-icon fa fa-plus-circle purple',
					    del: true,
					    delicon: 'ace-icon fa fa-trash-o red',
					    search: true,
					    searchicon: 'ace-icon fa fa-search orange',
					    refresh: true,
					    refreshicon: 'ace-icon fa fa-refresh green',
					    view: true,
					    viewicon: 'ace-icon fa fa-search-plus grey',
					},
					{
					    //edit record form
					    //closeAfterEdit: true,
					    //width: 700,
					    recreateForm: true,
					    beforeShowForm: function (e) {
					        var form = $(e[0]);
					        form.closest('.ui-jqdialog').find('.ui-jqdialog-titlebar').wrapInner('<div class="widget-header" />')
					        style_edit_form(form);
					    }
					},
					{
					    //new record form
					    //width: 700,
					    closeAfterAdd: true,
					    recreateForm: true,
					    viewPagerButtons: false,
					    beforeShowForm: function (e) {
					        var form = $(e[0]);
					        form.closest('.ui-jqdialog').find('.ui-jqdialog-titlebar')
							.wrapInner('<div class="widget-header" />')
					        style_edit_form(form);
					    },
					    afterShowForm: function (form) {
					        form.closest('div.ui-jqdialog').center();
					    },
					},
					{
					    //delete record form
					    recreateForm: true,
					    beforeShowForm: function (e) {
					        var form = $(e[0]);
					        if (form.data('styled')) return false;

					        form.closest('.ui-jqdialog').find('.ui-jqdialog-titlebar').wrapInner('<div class="widget-header" />')
					        style_delete_form(form);

					        form.data('styled', true);
					    },
					    onClick: function (e) {
					        //alert(1);
					    }
					},
					{
					    //search form
					    recreateForm: true,
					    afterShowSearch: function (e) {
					        var form = $(e[0]);
					        form.closest('.ui-jqdialog').find('.ui-jqdialog-title').wrap('<div class="widget-header" />')
					        style_search_form(form);
					    },
					    afterRedraw: function () {
					        style_search_filters($(this));
					    }
						,
					    multipleSearch: true,
					    /**
						multipleGroup:true,
						showQuery: true
						*/
					},
					{
					    //view record form
					    recreateForm: true,
					    beforeShowForm: function (e) {
					        var form = $(e[0]);
					        form.closest('.ui-jqdialog').find('.ui-jqdialog-title').wrap('<div class="widget-header" />')
					        form.closest('.ui-jqdialog').center()
					    }
					    
					}
				)



                function style_edit_form(form) {
                    //enable datepicker on "sdate" field and switches for "stock" field
                    form.find('input[name=sdate]').datepicker({ format: 'yyyy-mm-dd', autoclose: true })

                    form.find('input[name=stock]').addClass('ace ace-switch ace-switch-5').after('<span class="lbl"></span>');
                    //don't wrap inside a label element, the checkbox value won't be submitted (POST'ed)
                    //.addClass('ace ace-switch ace-switch-5').wrap('<label class="inline" />').after('<span class="lbl"></span>');


                    //update buttons classes
                    var buttons = form.next().find('.EditButton .fm-button');
                    buttons.addClass('btn btn-sm').find('[class*="-icon"]').hide();//ui-icon, s-icon
                    buttons.eq(0).addClass('btn-primary').prepend('<i class="ace-icon fa fa-check"></i>');
                    buttons.eq(1).prepend('<i class="ace-icon fa fa-times"></i>')

                    buttons = form.next().find('.navButton a');
                    buttons.find('.ui-icon').hide();
                    buttons.eq(0).append('<i class="ace-icon fa fa-chevron-left"></i>');
                    buttons.eq(1).append('<i class="ace-icon fa fa-chevron-right"></i>');
                }

                function style_delete_form(form) {
                    var buttons = form.next().find('.EditButton .fm-button');
                    buttons.addClass('btn btn-sm btn-white btn-round').find('[class*="-icon"]').hide();//ui-icon, s-icon
                    buttons.eq(0).addClass('btn-danger').prepend('<i class="ace-icon fa fa-trash-o"></i>');
                    buttons.eq(1).addClass('btn-default').prepend('<i class="ace-icon fa fa-times"></i>')
                }

                function style_search_filters(form) {
                    form.find('.delete-rule').val('X');
                    form.find('.add-rule').addClass('btn btn-xs btn-primary');
                    form.find('.add-group').addClass('btn btn-xs btn-success');
                    form.find('.delete-group').addClass('btn btn-xs btn-danger');
                }
                function style_search_form(form) {
                    var dialog = form.closest('.ui-jqdialog');
                    var buttons = dialog.find('.EditTable')
                    buttons.find('.EditButton a[id*="_reset"]').addClass('btn btn-sm btn-info').find('.ui-icon').attr('class', 'ace-icon fa fa-retweet');
                    buttons.find('.EditButton a[id*="_query"]').addClass('btn btn-sm btn-inverse').find('.ui-icon').attr('class', 'ace-icon fa fa-comment-o');
                    buttons.find('.EditButton a[id*="_search"]').addClass('btn btn-sm btn-purple').find('.ui-icon').attr('class', 'ace-icon fa fa-search');
                }

                function beforeDeleteCallback(e) {
                    var form = $(e[0]);
                    if (form.data('styled')) return false;

                    form.closest('.ui-jqdialog').find('.ui-jqdialog-titlebar').wrapInner('<div class="widget-header" />')
                    style_delete_form(form);

                    form.data('styled', true);
                }

                function beforeEditCallback(e) {
                    var form = $(e[0]);
                    form.closest('.ui-jqdialog').find('.ui-jqdialog-titlebar').wrapInner('<div class="widget-header" />')
                    style_edit_form(form);
                }



                //it causes some flicker when reloading or navigating grid
                //it may be possible to have some custom formatter to do this as the grid is being created to prevent this
                //or go back to default browser checkbox styles for the grid
                function styleCheckbox(table) {
                    /**
                        $(table).find('input:checkbox').addClass('ace')
                        .wrap('<label />')
                        .after('<span class="lbl align-top" />')


                        $('.ui-jqgrid-labels th[id*="_cb"]:first-child')
                        .find('input.cbox[type=checkbox]').addClass('ace')
                        .wrap('<label />').after('<span class="lbl align-top" />');
                    */
                }


                //unlike navButtons icons, action icons in rows seem to be hard-coded
                //you can change them like this in here if you want
                function updateActionIcons(table) {
                    /**
					var replacement =
					{
						'ui-ace-icon fa fa-pencil' : 'ace-icon fa fa-pencil blue',
						'ui-ace-icon fa fa-trash-o' : 'ace-icon fa fa-trash-o red',
						'ui-icon-disk' : 'ace-icon fa fa-check green',
						'ui-icon-cancel' : 'ace-icon fa fa-times red'
					};
					$(table).find('.ui-pg-div span.ui-icon').each(function(){
						var icon = $(this);
						var $class = $.trim(icon.attr('class').replace('ui-icon', ''));
						if($class in replacement) icon.attr('class', 'ui-icon '+replacement[$class]);
					})
					*/
                }

                //replace icons with FontAwesome icons like above
                function updatePagerIcons(table) {
                    var replacement =
					{
					    'ui-icon-seek-first': 'ace-icon fa fa-angle-double-left bigger-140',
					    'ui-icon-seek-prev': 'ace-icon fa fa-angle-left bigger-140',
					    'ui-icon-seek-next': 'ace-icon fa fa-angle-right bigger-140',
					    'ui-icon-seek-end': 'ace-icon fa fa-angle-double-right bigger-140'
					};
                    $('.ui-pg-table:not(.navtable) > tbody > tr > .ui-pg-button > .ui-icon').each(function () {
                        var icon = $(this);
                        var $class = $.trim(icon.attr('class').replace('ui-icon', ''));

                        if ($class in replacement) icon.attr('class', 'ui-icon ' + replacement[$class]);
                    })
                }

                function enableTooltips(table) {
                    $('.navtable .ui-pg-button').tooltip({ container: 'body' });
                    $(table).find('.ui-pg-div').tooltip({ container: 'body' });
                }

                //var selr = jQuery(grid_selector).jqGrid('getGridParam','selrow');

                $(document).one('ajaxloadstart.page', function (e) {
                    $.jgrid.gridDestroy(grid_selector);
                    $('.ui-jqdialog').remove();
                });

















            });


            jQuery(function ($) {

                $('#myTab a[data-toggle="tab"]').on('shown.bs.tab', function (e) {
                    //if($(e.target).attr('href') == "#home") doSomethingNow();
                });


                if (!ace.vars['touch']) {
                    $('.chosen-select').chosen({ allow_single_deselect: true });
                    //resize the chosen on window resize

                    //$(window)
                    //.off('resize.chosen')
                    //.on('resize.chosen', function () {
                    //    $('.chosen-select').each(function () {
                    //        var $this = $(this);
                    //        $this.next().css({ 'width': $this.parent().width() });
                    //    })
                    //}).trigger('resize.chosen');
                    //resize chosen on sidebar collapse/expand
                    $(document).on('settings.ace.chosen', function (e, event_name, event_val) {
                        if (event_name != 'sidebar_collapsed') return;
                        $('.chosen-select').each(function () {
                            var $this = $(this);
                            $this.next().css({ 'width': $this.parent().width() });
                        })
                    });


                    $('#chosen-multiple-style .btn').on('click', function (e) {
                        var target = $(this).find('input[type=radio]');
                        var which = parseInt(target.val());
                        if (which == 2) $('#form-field-select-4').addClass('tag-input-style');
                        else $('#form-field-select-4').removeClass('tag-input-style');
                    });
                }

                //chosen plugin inside a modal will have a zero width because the select element is originally hidden
                //and its width cannot be determined.
                //so we set the width after modal is show
                $('#modal-form').on('shown.bs.modal', function () {
                    if (!ace.vars['touch']) {
                        $(this).find('.chosen-container').each(function () {
                            $(this).find('a:first-child').css('width', '210px');
                            $(this).find('.chosen-drop').css('width', '210px');
                            $(this).find('.chosen-search input').css('width', '200px');
                        });
                    }
                })
                /**
				//or you can activate the chosen plugin after modal is shown
				//this way select element becomes visible with dimensions and chosen works as expected
				$('#modal-form').on('shown', function () {
					$(this).find('.modal-chosen').chosen();
				})
				*/



                $(document).one('ajaxloadstart.page', function (e) {
                    autosize.destroy('textarea[class*=autosize]')

                    $('.limiterBox,.autosizejs').remove();
                    $('.daterangepicker.dropdown-menu,.colorpicker.dropdown-menu,.bootstrap-datetimepicker-widget.dropdown-menu').remove();
                });

                autosize($('textarea[class*=autosize]'));



            });

    </script>
 }